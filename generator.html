<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Pokérole Monster Sheet Generator 2.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&family=Roboto+Condensed:wght@400;700&display=swap');
        body { font-family: 'Roboto Condensed', sans-serif; background: #1a1a1a; color: white; }
        .monster-sheet { width: 850px; background: #f3f4f6; color: #1f2937; border-radius: 10px; padding: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); margin: 20px auto; }
        .label { font-size: 0.65rem; font-weight: bold; color: #4b5563; text-transform: uppercase; border-bottom: 1px solid #d1d5db; }
        .dot { width: 12px; height: 12px; border: 1.5px solid #4b5563; border-radius: 50%; display: inline-block; margin-right: 2px; }
        .dot.filled { background: #1f2937; }
        .stat-box { border: 2px solid #1f2937; text-align: center; border-radius: 8px; }
    </style>
</head>
<body>

<div class="flex flex-col items-center p-6">
    <button onclick="generateRandomCard()" class="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transition-all uppercase tracking-widest mb-8">
        Genera Pokémon Casuale
    </button>
    <div id="card-display"></div>
</div>

<script>
let pokemonData = [];

// Caricamento del JSON
fetch('pokemon.json')
    .then(res => res.json())
    .then(data => { pokemonData = data; generateRandomCard(); });

function generateRandomCard() {
    if (pokemonData.length === 0) return;
    const p = pokemonData[Math.floor(Math.random() * pokemonData.length)];
    const container = document.getElementById('card-display');
    
    // Logica di calcolo 
    const hp = p.vitalita_max?.hp || 0;
    const insightBase = p.attributi?.insight?.base || 0;
    const will = parseInt(insightBase) + 2;

    container.innerHTML = `
    <div class="monster-sheet">
        <div class="flex justify-between items-end mb-4 border-b-4 border-black pb-2">
            <div>
                <h1 class="text-5xl font-black uppercase italic italic">${p.nome}</h1>
                <div class="text-sm font-bold">TYPE: ${p.tipo.join(' / ')} | RANK: ${p.rango_suggerito}</div>
            </div>
            <div class="flex gap-4">
                <div class="stat-box w-20 p-2"><div class="label">HP</div><div class="text-3xl font-black">${hp}</div></div>
                <div class="stat-box w-20 p-2"><div class="label">WILL</div><div class="text-3xl font-black">${will}</div></div>
            </div>
        </div>

        <div class="grid grid-cols-12 gap-6">
            <div class="col-span-4">
                <div class="bg-white border-2 border-black rounded-xl overflow-hidden mb-4 p-2">
                    <img src="${p.immagine}" class="w-full h-48 object-contain">
                </div>
                
                <div class="space-y-2">
                    ${['FORZA', 'DESTREZZA', 'VITALITA', 'SPECIAL', 'INSIGHT'].map(attr => {
                        const val = p.attributi?.[attr.toLowerCase()]?.base || 0;
                        return `
                        <div class="flex justify-between items-center">
                            <span class="label border-none">${attr}</span>
                            <div>${Array.from({length: 5}, (_, i) => `<span class="dot ${i < val ? 'filled' : ''}"></span>`).join('')}</div>
                        </div>`;
                    }).join('')}
                </div>
            </div>

            <div class="col-span-4 space-y-4">
                <div class="p-2 bg-gray-200 rounded">
                    <div class="label">Skills & Social</div>
                    <div class="text-[10px] mt-1 grid grid-cols-2 gap-x-2 italic">
                        <span>BRAWL: 00000</span><span>FIGHT: 00000</span>
                        <span>CLASH: 00000</span><span>COOL: 00000</span>
                        <span>ALERT: 00000</span><span>TOUGH: 00000</span>
                        <span>NATURE: 00000</span><span>SOCIAL: 00000</span>
                    </div>
                </div>
                <div class="p-2 border border-gray-300">
                    <div class="label">Abilità</div>
                    <div class="text-xs font-bold uppercase">${p.abilita.join(', ')}</div>
                </div>
                <div class="p-2 border border-gray-300">
                    <div class="label">Descrizione</div>
                    <div class="text-[10px] leading-tight">${p.descrizione}</div>
                </div>
            </div>

            <div class="col-span-4 space-y-4">
                <div class="grid grid-cols-2 gap-2">
                    <div class="stat-box p-1"><div class="label">ACCURACY</div><div class="font-bold">0</div></div>
                    <div class="stat-box p-1"><div class="label">DAMAGE</div><div class="font-bold">0</div></div>
                    <div class="stat-box p-1"><div class="label">EVASION</div><div class="font-bold">0</div></div>
                    <div class="stat-box p-1"><div class="label">INITIATIVE</div><div class="font-bold">0</div></div>
                </div>
                
                <div class="p-2 bg-black text-white rounded">
                    <div class="label text-gray-400">Moves / Tecniche</div>
                    <div class="text-[9px] mt-1 space-y-1">
                        ${p.tecniche.slice(0, 6).map(t => `
                            <div class="flex justify-between border-b border-gray-700 pb-1">
                                <span>${t.nome.toUpperCase()}</span>
                                <span class="text-yellow-500">${t.rango}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="text-[10px] grid grid-cols-2">
                    <div><span class="label">WEIGHT:</span> ${p.peso}</div>
                    <div><span class="label">SIZE:</span> ${p.altezza}</div>
                </div>
            </div>
        </div>
    </div>`;
}
</script>
</body>
</html>
