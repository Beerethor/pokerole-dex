// --- LA TUA VECCHIA CARD POTENZIATA CON TUTTI I DATI ---
function createClassicCard(item) {
    // Gestione Tipi (singolo o array)
    const tipi = Array.isArray(item.tipo) ? item.tipo : [item.tipo || "Normale"];
    const tipoPrimario = tipi[0].toLowerCase();
    const colorClass = `type-${tipoPrimario}`;
    
    // Determiniamo se è un Pokémon o una Tecnica/Abilità per mostrare i dati giusti
    const isPkmn = window.currentSub === 'pkmn';

    return `
    <div class="bg-slate-900 rounded-[2rem] border border-slate-800 overflow-hidden animate-pop flex flex-col h-full shadow-xl transition-all hover:scale-[1.02]">
        <div class="${colorClass} p-4 flex justify-between items-center shadow-lg">
            <div>
                <h3 class="text-xl font-black text-white uppercase italic tracking-tighter">${item.nome}</h3>
                ${item.rango ? `<span class="text-[8px] font-black bg-black/30 px-2 py-0.5 rounded uppercase">Rango: ${item.rango}</span>` : ''}
            </div>
            <div class="flex gap-1">
                ${tipi.map(t => `<span class="text-[8px] font-bold bg-white/20 px-2 py-1 rounded uppercase border border-white/10">${t}</span>`).join('')}
            </div>
        </div>

        <div class="p-5 flex flex-col gap-4 flex-grow">
            ${isPkmn && item.immagine ? `
                <div class="flex gap-4 items-center border-b border-slate-800 pb-4">
                    <img src="${item.immagine}" class="w-20 h-20 object-contain bg-black/40 rounded-2xl p-2 border border-white/5" onerror="this.src='https://via.placeholder.com/80?text=PKMN'">
                    <div class="text-[11px] text-slate-400 italic leading-relaxed">
                        ${item.descrizione || 'Nessuna voce di Pokédex presente.'}
                    </div>
                </div>
            ` : ''}

            <div class="flex-grow">
                ${!isPkmn ? `
                    <div class="bg-black/40 p-3 rounded-xl border border-white/5">
                        <b class="text-yellow-600 uppercase text-[9px] block mb-1 italic">Effetto / Descrizione</b>
                        <p class="text-[12px] text-slate-200 leading-relaxed">
                            ${item.effetto || item.effetti_aggiuntivi || item.descrizione || "Nessun dato registrato."}
                        </p>
                    </div>
                ` : `
                    ${!item.immagine ? `<p class="text-[12px] text-slate-300 italic">${item.descrizione || ''}</p>` : ''}
                `}
            </div>

            ${item.note ? `
                <div class="text-[9px] text-slate-500 uppercase font-bold tracking-tighter border-t border-slate-800 pt-2">
                    Note: ${item.note}
                </div>
            ` : ''}
        </div>
    </div>`;
}
